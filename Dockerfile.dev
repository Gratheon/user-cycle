# Development Dockerfile (no build step, uses tsc-watch via docker-compose)
FROM node:20-alpine

WORKDIR /app

# Optional: install build tools if native modules are needed later
# RUN apk add --no-cache python3 make g++

# Copy manifests for better caching
COPY package.json package-lock.json* ./

RUN npm install

# Copy tsconfig so tsc-watch can read it even before volume mount
COPY src/config ./src/config

ENV NODE_ENV=development

EXPOSE 4000

# No CMD; docker-compose will supply tsc-watch command
